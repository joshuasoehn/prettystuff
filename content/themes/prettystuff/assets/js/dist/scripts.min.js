$(document).ready(function(){$('a[href^="http://"]').not("a[href*=gusdecool]").attr("target","_blank"),$(".single-post img").each(function(){$(this).wrap("<a href='"+this.src+"' data-rel='lightcase' ></a>")}),$("a[data-rel^=lightcase]").lightcase({transition:"fade"});var a=window.location.pathname,b=new RegExp("/"==a?window.location.origin+"/?$":a.replace(/\/$/,""));$(".menu a").each(function(){b.test(this.href.replace(/\/$/,""))&&$(this).addClass("active")}),$(".menu-toggle").click(function(){$(".site").toggleClass("pull-right"),$(".sidebar").toggleClass("visible"),$("body").toggleClass("hidden")}),$("body").on("touchmove",function(a){$(".site").hasClass("pull-right")&&a.preventDefault()})}),function(a,b){function c(a,b,c){var d=a.children(),e=!1;a.empty();for(var g=0,h=d.length;h>g;g++){var i=d.eq(g);if(a.append(i),c&&a.append(c),f(a,b)){i.remove(),e=!0;break}c&&c.detach()}return e}function d(b,c,g,h,i){var j=!1,k="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",l="script, .dotdotdot-keep";return b.contents().detach().each(function(){var m=this,n=a(m);if("undefined"==typeof m||3==m.nodeType&&0==a.trim(m.data).length)return!0;if(n.is(l))b.append(n);else{if(j)return!0;b.append(n),i&&b[b.is(k)?"after":"append"](i),f(g,h)&&(j=3==m.nodeType?e(n,c,g,h,i):d(n,c,g,h,i),j||(n.detach(),j=!0)),j||i&&i.detach()}}),j}function e(b,c,d,e,h){var k=b[0];if(!k)return!1;var m=j(k),n=-1!==m.indexOf(" ")?" ":"　",o="letter"==e.wrap?"":n,p=m.split(o),q=-1,r=-1,s=0,t=p.length-1;for(e.fallbackToLetter&&0==s&&0==t&&(o="",p=m.split(o),t=p.length-1);t>=s&&(0!=s||0!=t);){var u=Math.floor((s+t)/2);if(u==r)break;r=u,i(k,p.slice(0,r+1).join(o)+e.ellipsis),f(d,e)?(t=r,e.fallbackToLetter&&0==s&&0==t&&(o="",p=p[0].split(o),q=-1,r=-1,s=0,t=p.length-1)):(q=r,s=r)}if(-1==q||1==p.length&&0==p[0].length){var v=b.parent();b.detach();var w=h&&h.closest(v).length?h.length:0;v.contents().length>w?k=l(v.contents().eq(-1-w),c):(k=l(v,c,!0),w||v.detach()),k&&(m=g(j(k),e),i(k,m),w&&h&&a(k).parent().append(h))}else m=g(p.slice(0,q+1).join(o),e),i(k,m);return!0}function f(a,b){return a.innerHeight()>b.maxHeight}function g(b,c){for(;a.inArray(b.slice(-1),c.lastCharacter.remove)>-1;)b=b.slice(0,-1);return a.inArray(b.slice(-1),c.lastCharacter.noEllipsis)<0&&(b+=c.ellipsis),b}function h(a){return{width:a.innerWidth(),height:a.innerHeight()}}function i(a,b){a.innerText?a.innerText=b:a.nodeValue?a.nodeValue=b:a.textContent&&(a.textContent=b)}function j(a){return a.innerText?a.innerText:a.nodeValue?a.nodeValue:a.textContent?a.textContent:""}function k(a){do a=a.previousSibling;while(a&&1!==a.nodeType&&3!==a.nodeType);return a}function l(b,c,d){var e,f=b&&b[0];if(f){if(!d){if(3===f.nodeType)return f;if(a.trim(b.text()))return l(b.contents().last(),c)}for(e=k(f);!e;){if(b=b.parent(),b.is(c)||!b.length)return!1;e=k(b[0])}if(e)return l(a(e),c)}return!1}function m(b,c){return b?"string"==typeof b?(b=a(b,c),b.length?b:!1):b.jquery?b:!1:!1}function n(a){for(var b=a.innerHeight(),c=["paddingTop","paddingBottom"],d=0,e=c.length;e>d;d++){var f=parseInt(a.css(c[d]),10);isNaN(f)&&(f=0),b-=f}return b}if(!a.fn.dotdotdot){a.fn.dotdotdot=function(b){if(0==this.length)return a.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){a(this).dotdotdot(b)});var e=this;e.data("dotdotdot")&&e.trigger("destroy.dot"),e.data("dotdotdot-style",e.attr("style")||""),e.css("word-wrap","break-word"),"nowrap"===e.css("white-space")&&e.css("white-space","normal"),e.bind_events=function(){return e.bind("update.dot",function(b,h){b.preventDefault(),b.stopPropagation(),i.maxHeight="number"==typeof i.height?i.height:n(e),i.maxHeight+=i.tolerance,"undefined"!=typeof h&&(("string"==typeof h||h instanceof HTMLElement)&&(h=a("<div />").append(h).contents()),h instanceof a&&(g=h)),p=e.wrapInner('<div class="dotdotdot" />').children(),p.contents().detach().end().append(g.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var k=!1,l=!1;return j.afterElement&&(k=j.afterElement.clone(!0),k.show(),j.afterElement.detach()),f(p,i)&&(l="children"==i.wrap?c(p,i,k):d(p,e,p,i,k)),p.replaceWith(p.contents()),p=null,a.isFunction(i.callback)&&i.callback.call(e[0],l,g),j.isTruncated=l,l}).bind("isTruncated.dot",function(a,b){return a.preventDefault(),a.stopPropagation(),"function"==typeof b&&b.call(e[0],j.isTruncated),j.isTruncated}).bind("originalContent.dot",function(a,b){return a.preventDefault(),a.stopPropagation(),"function"==typeof b&&b.call(e[0],g),g}).bind("destroy.dot",function(a){a.preventDefault(),a.stopPropagation(),e.unwatch().unbind_events().contents().detach().end().append(g).attr("style",e.data("dotdotdot-style")||"").data("dotdotdot",!1)}),e},e.unbind_events=function(){return e.unbind(".dot"),e},e.watch=function(){if(e.unwatch(),"window"==i.watch){var b=a(window),c=b.width(),d=b.height();b.bind("resize.dot"+j.dotId,function(){c==b.width()&&d==b.height()&&i.windowResizeFix||(c=b.width(),d=b.height(),l&&clearInterval(l),l=setTimeout(function(){e.trigger("update.dot")},100))})}else k=h(e),l=setInterval(function(){if(e.is(":visible")){var a=h(e);(k.width!=a.width||k.height!=a.height)&&(e.trigger("update.dot"),k=a)}},500);return e},e.unwatch=function(){return a(window).unbind("resize.dot"+j.dotId),l&&clearInterval(l),e};var g=e.contents(),i=a.extend(!0,{},a.fn.dotdotdot.defaults,b),j={},k={},l=null,p=null;return i.lastCharacter.remove instanceof Array||(i.lastCharacter.remove=a.fn.dotdotdot.defaultArrays.lastCharacter.remove),i.lastCharacter.noEllipsis instanceof Array||(i.lastCharacter.noEllipsis=a.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),j.afterElement=m(i.after,e),j.isTruncated=!1,j.dotId=o++,e.data("dotdotdot",!0).bind_events().trigger("update.dot"),i.watch&&e.watch(),e},a.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},a.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","　",",",";",".","!","?"],noEllipsis:[]}},a.fn.dotdotdot.debug=function(){};var o=1,p=a.fn.html;a.fn.html=function(c){return c!=b&&!a.isFunction(c)&&this.data("dotdotdot")?this.trigger("update",[c]):p.apply(this,arguments)};var q=a.fn.text;a.fn.text=function(c){return c!=b&&!a.isFunction(c)&&this.data("dotdotdot")?(c=a("<div />").text(c).html(),this.trigger("update",[c])):q.apply(this,arguments)}}}(jQuery),function(a,b,c){"function"==typeof define&&define.amd?define(["jquery"],function(d){return c(d,a,b),d.mobile}):c(a.jQuery,a,b)}(this,document,function(a,b,c){!function(a,b,c,d){function e(a){for(;a&&"undefined"!=typeof a.originalEvent;)a=a.originalEvent;return a}function f(b,c){var f,g,h,i,j,k,l,m,n,o=b.type;if(b=a.Event(b),b.type=c,f=b.originalEvent,g=a.event.props,o.search(/^(mouse|click)/)>-1&&(g=D),f)for(l=g.length,i;l;)i=g[--l],b[i]=f[i];if(o.search(/mouse(down|up)|click/)>-1&&!b.which&&(b.which=1),-1!==o.search(/^touch/)&&(h=e(f),o=h.touches,j=h.changedTouches,k=o&&o.length?o[0]:j&&j.length?j[0]:d,k))for(m=0,n=B.length;n>m;m++)i=B[m],b[i]=k[i];return b}function g(b){for(var c,d,e={};b;){c=a.data(b,y);for(d in c)c[d]&&(e[d]=e.hasVirtualBinding=!0);b=b.parentNode}return e}function h(b,c){for(var d;b;){if(d=a.data(b,y),d&&(!c||d[c]))return b;b=b.parentNode}return null}function i(){L=!1}function j(){L=!0}function k(){P=0,J.length=0,K=!1,j()}function l(){i()}function m(){n(),F=setTimeout(function(){F=0,k()},a.vmouse.resetTimerDuration)}function n(){F&&(clearTimeout(F),F=0)}function o(b,c,d){var e;return(d&&d[b]||!d&&h(c.target,b))&&(e=f(c,b),a(c.target).trigger(e)),e}function p(b){var c=a.data(b.target,z);if(!(K||P&&P===c)){var d=o("v"+b.type,b);d&&(d.isDefaultPrevented()&&b.preventDefault(),d.isPropagationStopped()&&b.stopPropagation(),d.isImmediatePropagationStopped()&&b.stopImmediatePropagation())}}function q(b){var c,d,f=e(b).touches;if(f&&1===f.length&&(c=b.target,d=g(c),d.hasVirtualBinding)){P=O++,a.data(c,z,P),n(),l(),I=!1;var h=e(b).touches[0];G=h.pageX,H=h.pageY,o("vmouseover",b,d),o("vmousedown",b,d)}}function r(a){L||(I||o("vmousecancel",a,g(a.target)),I=!0,m())}function s(b){if(!L){var c=e(b).touches[0],d=I,f=a.vmouse.moveDistanceThreshold,h=g(b.target);I=I||Math.abs(c.pageX-G)>f||Math.abs(c.pageY-H)>f,I&&!d&&o("vmousecancel",b,h),o("vmousemove",b,h),m()}}function t(a){if(!L){j();var b,c=g(a.target);if(o("vmouseup",a,c),!I){var d=o("vclick",a,c);d&&d.isDefaultPrevented()&&(b=e(a).changedTouches[0],J.push({touchID:P,x:b.clientX,y:b.clientY}),K=!0)}o("vmouseout",a,c),I=!1,m()}}function u(b){var c,d=a.data(b,y);if(d)for(c in d)if(d[c])return!0;return!1}function v(){}function w(b){var c=b.substr(1);return{setup:function(){u(this)||a.data(this,y,{});var d=a.data(this,y);d[b]=!0,E[b]=(E[b]||0)+1,1===E[b]&&N.bind(c,p),a(this).bind(c,v),M&&(E.touchstart=(E.touchstart||0)+1,1===E.touchstart&&N.bind("touchstart",q).bind("touchend",t).bind("touchmove",s).bind("scroll",r))},teardown:function(){--E[b],E[b]||N.unbind(c,p),M&&(--E.touchstart,E.touchstart||N.unbind("touchstart",q).unbind("touchmove",s).unbind("touchend",t).unbind("scroll",r));var d=a(this),e=a.data(this,y);e&&(e[b]=!1),d.unbind(c,v),u(this)||d.removeData(y)}}}var x,y="virtualMouseBindings",z="virtualTouchID",A="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),B="clientX clientY pageX pageY screenX screenY".split(" "),C=a.event.mouseHooks?a.event.mouseHooks.props:[],D=a.event.props.concat(C),E={},F=0,G=0,H=0,I=!1,J=[],K=!1,L=!1,M="addEventListener"in c,N=a(c),O=1,P=0;a.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var Q=0;Q<A.length;Q++)a.event.special[A[Q]]=w(A[Q]);M&&c.addEventListener("click",function(b){var c,d,e,f,g,h,i=J.length,j=b.target;if(i)for(c=b.clientX,d=b.clientY,x=a.vmouse.clickDistanceThreshold,e=j;e;){for(f=0;i>f;f++)if(g=J[f],h=0,e===j&&Math.abs(g.x-c)<x&&Math.abs(g.y-d)<x||a.data(e,z)===g.touchID)return b.preventDefault(),void b.stopPropagation();e=e.parentNode}},!0)}(a,b,c),function(a){a.mobile={}}(a),function(a){var b={touch:"ontouchend"in c};a.mobile.support=a.mobile.support||{},a.extend(a.support,b),a.extend(a.mobile.support,b)}(a),function(a,b,d){function e(b,c,d){var e=d.type;d.type=c,a.event.dispatch.call(b,d),d.type=e}var f=a(c);a.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(b,c){a.fn[c]=function(a){return a?this.bind(c,a):this.trigger(c)},a.attrFn&&(a.attrFn[c]=!0)});var g=a.mobile.support.touch,h="touchmove scroll",i=g?"touchstart":"mousedown",j=g?"touchend":"mouseup",k=g?"touchmove":"mousemove";a.event.special.scrollstart={enabled:!0,setup:function(){function b(a,b){c=b,e(f,c?"scrollstart":"scrollstop",a)}var c,d,f=this,g=a(f);g.bind(h,function(e){a.event.special.scrollstart.enabled&&(c||b(e,!0),clearTimeout(d),d=setTimeout(function(){b(e,!1)},50))})}},a.event.special.tap={tapholdThreshold:750,setup:function(){var b=this,c=a(b);c.bind("vmousedown",function(d){function g(){clearTimeout(j)}function h(){g(),c.unbind("vclick",i).unbind("vmouseup",g),f.unbind("vmousecancel",h)}function i(a){h(),k===a.target&&e(b,"tap",a)}if(d.which&&1!==d.which)return!1;{var j,k=d.target;d.originalEvent}c.bind("vmouseup",g).bind("vclick",i),f.bind("vmousecancel",h),j=setTimeout(function(){e(b,"taphold",a.Event("taphold",{target:k}))},a.event.special.tap.tapholdThreshold)})}},a.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,start:function(b){var c=b.originalEvent.touches?b.originalEvent.touches[0]:b;return{time:(new Date).getTime(),coords:[c.pageX,c.pageY],origin:a(b.target)}},stop:function(a){var b=a.originalEvent.touches?a.originalEvent.touches[0]:a;return{time:(new Date).getTime(),coords:[b.pageX,b.pageY]}},handleSwipe:function(b,c){c.time-b.time<a.event.special.swipe.durationThreshold&&Math.abs(b.coords[0]-c.coords[0])>a.event.special.swipe.horizontalDistanceThreshold&&Math.abs(b.coords[1]-c.coords[1])<a.event.special.swipe.verticalDistanceThreshold&&b.origin.trigger("swipe").trigger(b.coords[0]>c.coords[0]?"swipeleft":"swiperight")},setup:function(){var b=this,c=a(b);c.bind(i,function(b){function e(b){g&&(f=a.event.special.swipe.stop(b),Math.abs(g.coords[0]-f.coords[0])>a.event.special.swipe.scrollSupressionThreshold&&b.preventDefault())}var f,g=a.event.special.swipe.start(b);c.bind(k,e).one(j,function(){c.unbind(k,e),g&&f&&a.event.special.swipe.handleSwipe(g,f),g=f=d})})}},a.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(b,c){a.event.special[b]={setup:function(){a(this).bind(c,a.noop)}}})}(a,this)}),function(a){window.lightcase={cache:{},support:{},labels:{errorMessage:"Source could not be found...","sequenceInfo.of":" of ",close:"Close","navigator.prev":"Prev","navigator.next":"Next","navigator.play":"Play","navigator.pause":"Pause"},init:function(b){a(this).unbind("click").click(function(c){c.preventDefault(),a(this).lightcase("start",b)})},start:function(b){lightcase.settings=a.extend({idPrefix:"lightcase-",classPrefix:"lightcase-",transition:"elastic",transitionIn:null,transitionOut:null,cssTransitions:!0,speedIn:350,speedOut:250,maxWidth:1200,maxHeight:1e3,forceWidth:!1,forceHeight:!1,liveResize:!0,fullScreenModeForMobile:!0,mobileMatchExpression:/(iphone|ipod|ipad|android|blackberry|symbian)/,disableShrink:!1,shrinkFactor:.75,overlayOpacity:.9,slideshow:!1,timeout:5e3,swipe:!0,useKeys:!0,navigateEndless:!0,closeOnOverlayClick:!0,showTitle:!0,showCaption:!0,showSequenceInfo:!0,inline:{width:"auto",height:"auto"},ajax:{width:"auto",height:"auto",type:"get",dataType:"html",data:{}},iframe:{width:800,height:500,frameborder:0},flash:{width:400,height:205,wmode:"transparent"},video:{width:400,height:225,poster:"",preload:"auto",controls:!0,autobuffer:!0,autoplay:!0,loop:!1},type:null,typeMapping:{image:"jpg,jpeg,gif,png,bmp",flash:"swf",video:"mp4,mov,ogv,ogg,webm",iframe:"html,php",ajax:"txt",inline:"#"},errorMessage:function(){return'<p class="'+lightcase.settings.classPrefix+'error">'+lightcase.labels.errorMessage+"</p>"},markup:function(){a("body").append($overlay=a('<div id="'+lightcase.settings.idPrefix+'overlay"></div>'),$loading=a('<div id="'+lightcase.settings.idPrefix+'loading"></div>'),$case=a('<div id="'+lightcase.settings.idPrefix+'case" aria-hidden="true" role="dialog"></div>')),$case.append($content=a('<div class="'+lightcase.settings.classPrefix+'content"></div>'),$info=a('<div class="'+lightcase.settings.classPrefix+'info"></div>'),$close=a('<a href="#" class="'+lightcase.settings.classPrefix+'close">'+lightcase.labels.close+"</a>")),$info.append($sequenceInfo=a('<div class="'+lightcase.settings.classPrefix+'sequenceInfo"></div>'),$title=a('<h4 class="'+lightcase.settings.classPrefix+'title"></h4>'),$caption=a('<p class="'+lightcase.settings.classPrefix+'caption"></p>')),$content.append($contentInner=a('<div class="'+lightcase.settings.classPrefix+'contentInner"></div>'),$nav=a('<div class="'+lightcase.settings.classPrefix+'nav"></div>')),$nav.append($prev=a('<a href="#" class="'+lightcase.settings.classPrefix+'prev"><span>'+lightcase.labels["navigator.prev"]+"</span></a>").hide(),$next=a('<a href="#" class="'+lightcase.settings.classPrefix+'next"><span>'+lightcase.labels["navigator.next"]+"</span></a>").hide(),$play=a('<a href="#" class="'+lightcase.settings.classPrefix+'play"><span>'+lightcase.labels["navigator.play"]+"</span></a>").hide(),$pause=a('<a href="#" class="'+lightcase.settings.classPrefix+'pause"><span>'+lightcase.labels["navigator.pause"]+"</span></a>").hide())},onInit:function(){},onStart:function(){},onFinish:function(){}},b),lightcase.objectData=lightcase.getObjectData(this),lightcase.dimensions=lightcase.getDimensions(),lightcase.settings.onInit(),lightcase.addElements(),lightcase.lightcaseOpen()},getObjectData:function(b){var c={$link:b,title:b.attr("title"),caption:b.children("img").attr("alt"),url:lightcase.verifyDataUrl(b.attr("data-href")||b.attr("href")),requestType:lightcase.settings.ajax.type,requestData:lightcase.settings.ajax.data,responseDataType:lightcase.settings.ajax.dataType,rel:b.attr("data-rel"),type:lightcase.settings.type||lightcase.verifyDataType(b.attr("data-href")||b.attr("href")),isPartOfSequence:lightcase.isPartOfSequence(b.attr("data-rel"),":"),isPartOfSequenceWithSlideshow:lightcase.isPartOfSequence(b.attr("data-rel"),":slideshow"),currentIndex:a('[data-rel="'+b.attr("data-rel")+'"]').index(b),sequenceLength:a('[data-rel="'+b.attr("data-rel")+'"]').length};return c.sequenceInfo=c.currentIndex+1+lightcase.labels["sequenceInfo.of"]+c.sequenceLength,c},isPartOfSequence:function(b,c){var d=a('[data-rel="'+b+'"]'),e=new RegExp(c);return e.test(b)&&d.length>1?!0:!1},isSlideshowEnabled:function(){return!lightcase.objectData.isPartOfSequence||lightcase.settings.slideshow!==!0&&lightcase.objectData.isPartOfSequenceWithSlideshow!==!0?!1:!0},loadContent:function(){lightcase.cache.originalObject&&lightcase.restoreObject(),lightcase.createObject()},createObject:function(){switch(lightcase.objectData.type){case"image":var b=a(new Image);b.attr({src:lightcase.objectData.url+"?random="+(new Date).getTime(),alt:lightcase.objectData.title});break;case"inline":var b=a('<div class="'+lightcase.settings.classPrefix+'inlineWrap"></div>');b.html(lightcase.cloneObject(a(lightcase.objectData.url))),a.each(lightcase.settings.inline,function(a,c){b.attr("data-"+a,c)});break;case"ajax":var b=a('<div class="'+lightcase.settings.classPrefix+'inlineWrap"></div>');a.each(lightcase.settings.ajax,function(a,c){"data"!==a&&b.attr("data-"+a,c)});break;case"flash":var b=a('<embed src="'+lightcase.objectData.url+'" type="application/x-shockwave-flash"></embed>');a.each(lightcase.settings.flash,function(a,c){b.attr(a,c)});break;case"video":var b=a("<video></video>");b.attr("src",lightcase.objectData.url),a.each(lightcase.settings.video,function(a,c){b.attr(a,c)});break;default:var b=a("<iframe></iframe>");b.attr({src:lightcase.objectData.url}),a.each(lightcase.settings.iframe,function(a,c){b.attr(a,c)})}lightcase.addObject(b),lightcase.loadObject(b)},addObject:function(a){$contentInner.html(a),lightcase.loading("start"),lightcase.settings.onStart(),lightcase.settings.showSequenceInfo===!0&&lightcase.objectData.isPartOfSequence?($sequenceInfo.html(lightcase.objectData.sequenceInfo),$sequenceInfo.show()):($sequenceInfo.empty(),$sequenceInfo.hide()),lightcase.settings.showTitle===!0&&void 0!==lightcase.objectData.title&&""!==lightcase.objectData.title?($title.html(lightcase.objectData.title),$title.show()):($title.empty(),$title.hide()),lightcase.settings.showCaption===!0&&void 0!==lightcase.objectData.caption&&""!==lightcase.objectData.caption?($caption.html(lightcase.objectData.caption),$caption.show()):($caption.empty(),$caption.hide())},loadObject:function(b){switch(lightcase.objectData.type){case"inline":a(lightcase.objectData.url)?lightcase.showContent(b):lightcase.error();break;case"ajax":a.ajax(a.extend({},lightcase.settings.ajax,{url:lightcase.objectData.url,type:lightcase.objectData.requestType,dataType:lightcase.objectData.requestDataType,data:lightcase.objectData.requestData,success:function(c){"json"===lightcase.objectData.responseDataType&&(c=a.parseJSON(c)),b.html(c),lightcase.showContent(b)},error:function(){lightcase.error()}}));break;case"flash":lightcase.showContent(b);break;case"video":"function"==typeof b.get(0).canPlayType||0===$case.find("video").length?lightcase.showContent(b):lightcase.error();break;default:lightcase.objectData.url?(b.load(function(){lightcase.showContent(b)}),b.error(function(){lightcase.error()})):lightcase.error()}},error:function(){lightcase.objectData.type="error";var b=a('<div class="'+lightcase.settings.classPrefix+'inlineWrap"></div>');b.html(lightcase.settings.errorMessage),$contentInner.html(b),lightcase.showContent($contentInner)},calculateDimensions:function(a){lightcase.cleanupDimensions();var b={objectWidth:a.attr(a.attr("width")?"width":"data-width"),objectHeight:a.attr(a.attr("height")?"height":"data-height"),maxWidth:parseInt(lightcase.dimensions.windowWidth*lightcase.settings.shrinkFactor),maxHeight:parseInt(lightcase.dimensions.windowHeight*lightcase.settings.shrinkFactor)};if(!lightcase.settings.disableShrink)switch(b.maxWidth>lightcase.settings.maxWidth&&(b.maxWidth=lightcase.settings.maxWidth),b.maxHeight>lightcase.settings.maxHeight&&(b.maxHeight=lightcase.settings.maxHeight),b.differenceWidthAsPercent=parseInt(100/b.maxWidth*b.objectWidth),b.differenceHeightAsPercent=parseInt(100/b.maxHeight*b.objectHeight),lightcase.objectData.type){case"image":case"flash":case"video":b.differenceWidthAsPercent>100&&b.differenceWidthAsPercent>b.differenceHeightAsPercent&&(b.objectWidth=b.maxWidth,b.objectHeight=parseInt(b.objectHeight/b.differenceWidthAsPercent*100)),b.differenceHeightAsPercent>100&&b.differenceHeightAsPercent>b.differenceWidthAsPercent&&(b.objectWidth=parseInt(b.objectWidth/b.differenceHeightAsPercent*100),b.objectHeight=b.maxHeight),b.differenceHeightAsPercent>100&&b.differenceWidthAsPercent<b.differenceHeightAsPercent&&(b.objectWidth=parseInt(b.maxWidth/b.differenceHeightAsPercent*b.differenceWidthAsPercent),b.objectHeight=b.maxHeight);break;case"error":!isNaN(b.objectWidth)&&b.objectWidth>b.maxWidth&&(b.objectWidth=b.maxWidth);break;default:(isNaN(b.objectWidth)||b.objectWidth>b.maxWidth)&&!lightcase.settings.forceWidth&&(b.objectWidth=b.maxWidth),(isNaN(b.objectHeight)&&"auto"!==b.objectHeight||b.objectHeight>b.maxHeight)&&!lightcase.settings.forceHeight&&(b.objectHeight=b.maxHeight)}lightcase.adjustDimensions(a,b)},adjustDimensions:function(a,b){a.css({width:b.objectWidth,height:b.objectHeight,"max-width":a.attr("data-max-width")?a.attr("data-max-width"):b.maxWidth,"max-height":a.attr("data-max-height")?a.attr("data-max-height"):b.maxHeight}),$contentInner.css({width:a.outerWidth(),height:a.outerHeight(),"max-width":"100%"}),$case.css({width:$contentInner.outerWidth()}),$case.css({"margin-top":parseInt(-($case.outerHeight()/2)),"margin-left":parseInt(-($case.outerWidth()/2))})},loading:function(a){"start"===a?($case.addClass(lightcase.settings.classPrefix+"loading"),$loading.show()):"end"===a&&($case.removeClass(lightcase.settings.classPrefix+"loading"),$loading.hide())},getDimensions:function(){return{windowWidth:a(window).innerWidth(),windowHeight:a(window).innerHeight()}},verifyDataUrl:function(a){return a&&void 0!==a&&""!==a?(a.indexOf("#")>-1&&(a=a.split("#"),a="#"+a[a.length-1]),a):!1},verifyDataType:function(a){var a=lightcase.verifyDataUrl(a),b=lightcase.settings.typeMapping;if(a)for(var c in b)for(var d=b[c].split(","),e=0;e<d.length;e++){var f=d[e],g=new RegExp(".("+f+")$","i"),h=a.split("?")[0].substr(-4);if(g.test(h)===!0)return c;if("inline"===c&&(a.indexOf(f)>-1||!a))return c}return"iframe"},addElements:function(){a('[id^="'+lightcase.settings.idPrefix+'"]').length||lightcase.settings.markup()},showContent:function(a){switch($case.attr("class","type-"+lightcase.objectData.type),lightcase.cache.object=a,lightcase.calculateDimensions(a),lightcase.settings.onFinish(),lightcase.settings.transitionIn){case"scrollTop":case"scrollRight":case"scrollBottom":case"scrollLeft":case"scrollHorizontal":case"scrollVertical":lightcase.transition.scroll($case,"in",lightcase.settings.speedIn),lightcase.transition.fade($contentInner,"in",lightcase.settings.speedIn);break;case"elastic":$case.css("opacity")<1&&(lightcase.transition.zoom($case,"in",lightcase.settings.speedIn),lightcase.transition.fade($contentInner,"in",lightcase.settings.speedIn));case"fade":case"fadeInline":lightcase.transition.fade($case,"in",lightcase.settings.speedIn),lightcase.transition.fade($contentInner,"in",lightcase.settings.speedIn);break;default:lightcase.transition.fade($case,"in",0)}lightcase.loading("end"),lightcase.busy=!1},processContent:function(){switch(lightcase.busy=!0,lightcase.settings.transitionOut){case"scrollTop":case"scrollRight":case"scrollBottom":case"scrollLeft":case"scrollVertical":case"scrollHorizontal":$case.is(":hidden")?(lightcase.transition.fade($case,"out",0,0,function(){lightcase.loadContent()}),lightcase.transition.fade($contentInner,"out",0)):(lightcase.transition.scroll($case,"out",lightcase.settings.speedOut,function(){lightcase.loadContent()}),lightcase.transition.fade($contentInner,"out",0));break;case"fade":$case.is(":hidden")?lightcase.transition.fade($case,"out",0,0,function(){lightcase.loadContent()}):lightcase.transition.fade($case,"out",lightcase.settings.speedOut,0,function(){lightcase.loadContent()});break;case"fadeInline":case"elastic":$case.is(":hidden")?lightcase.transition.fade($case,"out",0,0,function(){lightcase.loadContent()}):lightcase.transition.fade($contentInner,"out",lightcase.settings.speedOut,0,function(){lightcase.loadContent()});break;default:lightcase.transition.fade($case,"out",0,0,function(){lightcase.loadContent()})}},handleEvents:function(){lightcase.unbindEvents(),$nav.children().hide(),lightcase.isSlideshowEnabled()&&($play.show(),$pause.show(),$nav.hasClass(lightcase.settings.classPrefix+"paused")||lightcase.startTimeout()),lightcase.settings.liveResize&&a(window).resize(function(){lightcase.isSlideshowEnabled()&&lightcase.stopTimeout(),lightcase.open&&(lightcase.dimensions=lightcase.getDimensions(),lightcase.calculateDimensions(lightcase.cache.object))}),$close.click(function(a){a.preventDefault(),lightcase.lightcaseClose()}),lightcase.settings.closeOnOverlayClick===!0&&$overlay.css("cursor","pointer").click(function(a){a.preventDefault(),lightcase.lightcaseClose()}),lightcase.settings.useKeys===!0&&lightcase.addKeyEvents(),lightcase.objectData.isPartOfSequence&&(lightcase.nav=lightcase.setNavigation(),$prev.click(function(a){a.preventDefault(),$prev.unbind("click"),lightcase.cache.action="prev",lightcase.nav.$prevItem.click(),lightcase.isSlideshowEnabled()&&lightcase.stopTimeout()}),$next.click(function(a){a.preventDefault(),$next.unbind("click"),lightcase.cache.action="next",lightcase.nav.$nextItem.click(),lightcase.isSlideshowEnabled()&&lightcase.stopTimeout()}),lightcase.isSlideshowEnabled()&&($play.click(function(a){a.preventDefault(),lightcase.startTimeout()}),$pause.click(function(a){a.preventDefault(),lightcase.stopTimeout()})),lightcase.settings.swipe===!0&&(a.isPlainObject(a.event.special.swipeleft)&&$case.on("swipeleft",function(a){a.preventDefault(),$next.click(),lightcase.isSlideshowEnabled()&&lightcase.stopTimeout()}),a.isPlainObject(a.event.special.swiperight)&&$case.on("swiperight",function(a){a.preventDefault(),$prev.click(),lightcase.isSlideshowEnabled()&&lightcase.stopTimeout()})))},addKeyEvents:function(){a(document).keyup(function(a){if(!lightcase.busy)switch(a.keyCode){case 27:$close.click();break;case 37:lightcase.objectData.isPartOfSequence&&$prev.click();break;case 39:lightcase.objectData.isPartOfSequence&&$next.click()}})},startTimeout:function(){$play.hide(),$pause.show(),lightcase.cache.action="next",$nav.removeClass(lightcase.settings.classPrefix+"paused"),lightcase.timeout=setTimeout(function(){lightcase.nav.$nextItem.click()},lightcase.settings.timeout)},stopTimeout:function(){$play.show(),$pause.hide(),$nav.addClass(lightcase.settings.classPrefix+"paused"),clearTimeout(lightcase.timeout)},setNavigation:function(){var b=a('[data-rel="'+lightcase.objectData.rel+'"]'),c=lightcase.objectData.currentIndex,d=c-1,e=c+1,f=lightcase.objectData.sequenceLength-1,g={$prevItem:b.eq(d),$nextItem:b.eq(e)};return c>0?$prev.show():g.$prevItem=b.eq(f),f>=e?$next.show():g.$nextItem=b.eq(0),lightcase.settings.navigateEndless===!0&&($prev.show(),$next.show()),g},cloneObject:function(a){var b=a.clone(),c=a.attr("id");return a.is(":hidden")?(lightcase.cacheObjectData(a),a.attr("id",lightcase.settings.idPrefix+"temp-"+c).empty()):b.removeAttr("id"),b.show()},isMobileDevice:function(){var a=navigator.userAgent.toLowerCase(),b=a.match(lightcase.settings.mobileMatchExpression);return b?!0:!1},isTransitionSupported:function(){var b=a("body").get(0),c=!1,d={transition:"",WebkitTransition:"-webkit-",MozTransition:"-moz-",OTransition:"-o-",MsTransition:"-ms-"};for(var e in d)e in b.style&&(lightcase.support.transition=d[e],c=!0);return c},transition:{fade:function(a,b,c,d,e){var f="in"===b,g={},h=a.css("opacity"),i={},j=d?d:f?1:0;(lightcase.open||!f)&&(g.opacity=h,i.opacity=j,a.css(g).show(),lightcase.support.transitions?(i[lightcase.support.transition+"transition"]="opacity "+c+"ms ease-out",setTimeout(function(){a.css(i)},15),setTimeout(function(){a.css(lightcase.support.transition+"transition",""),!e||!lightcase.open&&f||e()},c)):(a.stop(),a.animate(i,c,e)))},scroll:function(a,b,c,d){var e="in"===b,f=e?lightcase.settings.transitionIn:lightcase.settings.transitionOut,g="left",h={},i=e?0:1,j=e?"-50%":"50%",k={},l=e?1:0,m=e?"50%":"-50%";if(lightcase.open||!e){switch(f){case"scrollTop":g="top";break;case"scrollRight":j=e?"150%":"50%",m=e?"50%":"150%";break;case"scrollBottom":g="top",j=e?"150%":"50%",m=e?"50%":"150%";break;case"scrollHorizontal":j=e?"150%":"50%",m=e?"50%":"-50%";break;case"scrollVertical":g="top",j=e?"-50%":"50%",m=e?"50%":"150%"}if("prev"===lightcase.cache.action)switch(f){case"scrollHorizontal":j=e?"-50%":"50%",m=e?"50%":"150%";break;case"scrollVertical":j=e?"150%":"50%",m=e?"50%":"-50%"}h.opacity=i,h[g]=j,k.opacity=l,k[g]=m,a.css(h).show(),lightcase.support.transitions?(k[lightcase.support.transition+"transition"]=g+" "+c+"ms ease-out",setTimeout(function(){a.css(k)},0),setTimeout(function(){a.css(lightcase.support.transition+"transition",""),!d||!lightcase.open&&e||d()},c)):(a.stop(),a.animate(k,c,d))}},zoom:function(a,b,c,d){var e="in"===b,f={},g=a.css("opacity"),h=e?"scale(0.75)":"scale(1)",i={},j=e?1:0,k=e?"scale(1)":"scale(0.75)";(lightcase.open||!e)&&(f.opacity=g,f[lightcase.support.transition+"transform"]=h,i.opacity=j,a.css(f).show(),lightcase.support.transitions?(i[lightcase.support.transition+"transform"]=k,i[lightcase.support.transition+"transition"]=c+"ms ease-out",setTimeout(function(){a.css(i)},0),setTimeout(function(){a.css(lightcase.support.transition+"transform",""),a.css(lightcase.support.transition+"transition",""),!d||!lightcase.open&&e||d()},c)):(a.stop(),a.animate(i,c,d)))}},cacheObjectData:function(b){a.data(b,"cache",{id:b.attr("id"),content:b.html()}),lightcase.cache.originalObject=b},restoreObject:function(){var b=a('[id^="'+lightcase.settings.idPrefix+'temp-"]');b.attr("id",a.data(lightcase.cache.originalObject,"cache").id),b.html(a.data(lightcase.cache.originalObject,"cache").content)},lightcaseOpen:function(){switch(lightcase.open=!0,lightcase.support.transitions=lightcase.settings.cssTransitions?lightcase.isTransitionSupported():!1,lightcase.support.mobileDevice=lightcase.isMobileDevice(),lightcase.support.mobileDevice&&(a("html").addClass(lightcase.settings.classPrefix+"isMobileDevice"),lightcase.settings.fullScreenModeForMobile&&lightcase.switchToFullScreenMode()),lightcase.settings.transitionIn||(lightcase.settings.transitionIn=lightcase.settings.transition),lightcase.settings.transitionOut||(lightcase.settings.transitionOut=lightcase.settings.transition),lightcase.settings.transitionIn){case"fade":case"fadeInline":case"elastic":case"scrollTop":case"scrollRight":case"scrollBottom":case"scrollLeft":case"scrollVertical":case"scrollHorizontal":$case.is(":hidden")&&($overlay.css("opacity",0),$case.css("opacity",0),$contentInner.css("opacity",0)),lightcase.transition.fade($overlay,"in",lightcase.settings.speedIn,lightcase.settings.overlayOpacity,function(){lightcase.handleEvents(),lightcase.processContent()});break;default:lightcase.transition.fade($overlay,"in",0,lightcase.settings.overlayOpacity,function(){lightcase.handleEvents(),lightcase.processContent()})}a("html").addClass(lightcase.settings.classPrefix+"open"),$case.attr("aria-hidden","false")
},lightcaseClose:function(){switch(lightcase.open=!1,$loading.hide(),lightcase.unbindEvents(),lightcase.isSlideshowEnabled()&&lightcase.stopTimeout(),a("html").removeClass(lightcase.settings.classPrefix+"open"),$case.attr("aria-hidden","true"),lightcase.settings.transitionOut){case"fade":case"fadeInline":case"scrollTop":case"scrollRight":case"scrollBottom":case"scrollLeft":case"scrollVertical":case"scrollHorizontal":lightcase.transition.fade($case,"out",lightcase.settings.speedOut,0,function(){lightcase.transition.fade($overlay,"out",lightcase.settings.speedOut,0,function(){lightcase.cleanup()})});break;case"elastic":lightcase.transition.zoom($case,"out",lightcase.settings.speedOut,function(){lightcase.transition.fade($overlay,"out",lightcase.settings.speedOut,0,function(){lightcase.cleanup()})});break;default:lightcase.cleanup()}},switchToFullScreenMode:function(){lightcase.settings.shrinkFactor=1,lightcase.settings.overlayOpacity=1,"none"!==lightcase.settings.transitionIn&&(lightcase.settings.transitionIn="fade"),"none"!==lightcase.settings.transitionOut&&(lightcase.settings.transitionOut="fade"),a("html").addClass(lightcase.settings.classPrefix+"fullScreenMode")},unbindEvents:function(){$overlay.unbind("click"),a(document).unbind("keyup"),$case.unbind("swipeleft").unbind("swiperight"),$nav.children("a").unbind("click"),$close.unbind("click")},cleanupDimensions:function(){var a=$contentInner.css("opacity");$case.css({width:"",height:"",top:"",left:"","margin-top":"","margin-left":""}),$contentInner.removeAttr("style").css("opacity",a),$contentInner.children().removeAttr("style")},cleanup:function(){lightcase.cleanupDimensions(),lightcase.isSlideshowEnabled()&&(lightcase.stopTimeout(),$nav.removeClass(lightcase.settings.classPrefix+"paused")),$loading.hide(),$overlay.hide(),$case.hide().removeAttr("class"),$contentInner.empty().hide(),$info.children().empty(),lightcase.cache.originalObject&&lightcase.restoreObject(),lightcase.cache={}}},a.fn.lightcase=function(b){return lightcase[b]?lightcase[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.lightcase"):lightcase.init.apply(this,arguments)}}(jQuery);