$(document).ready(function(){$('a[href^="http://"]').not("a[href*=gusdecool]").attr("target","_blank"),$(".single-post img").each(function(){$(this).wrap("<a href='"+this.src+"' data-rel='lightcase' ></a>")}),$("a[data-rel^=lightcase]").lightcase({transition:"fade"});var t=window.location.pathname,e=new RegExp("/"==t?window.location.origin+"/?$":t.replace(/\/$/,""));$(".menu a").each(function(){e.test(this.href.replace(/\/$/,""))&&$(this).addClass("active")}),$(".menu-toggle").click(function(){$(".site").toggleClass("pull-right"),$(".sidebar").toggleClass("visible"),$("body").toggleClass("hidden")}),$("body").on("touchmove",function(t){$(".site").hasClass("pull-right")&&t.preventDefault()}),$(".post-content").fitVids(),$("a.top").click(function(){return $("html, body").animate({scrollTop:0},800),!1})}),function(t,e,i){"function"==typeof define&&define.amd?define(["jquery"],function(s){return i(s,t,e),s.mobile}):i(t.jQuery,t,e)}(this,document,function(t,e,i,s){!function(t,e,i,s){function a(t){for(;t&&"undefined"!=typeof t.originalEvent;)t=t.originalEvent;return t}function n(e,i){var n,c,o,l,r,h,g,d,u,p=e.type;if(e=t.Event(e),e.type=i,n=e.originalEvent,c=t.event.props,p.search(/^(mouse|click)/)>-1&&(c=O),n)for(g=c.length,l;g;)l=c[--g],e[l]=n[l];if(p.search(/mouse(down|up)|click/)>-1&&!e.which&&(e.which=1),-1!==p.search(/^touch/)&&(o=a(n),p=o.touches,r=o.changedTouches,h=p&&p.length?p[0]:r&&r.length?r[0]:s,h))for(d=0,u=T.length;u>d;d++)l=T[d],e[l]=h[l];return e}function c(e){for(var i,s,a={};e;){i=t.data(e,D);for(s in i)i[s]&&(a[s]=a.hasVirtualBinding=!0);e=e.parentNode}return a}function o(e,i){for(var s;e;){if(s=t.data(e,D),s&&(!i||s[i]))return e;e=e.parentNode}return null}function l(){N=!1}function r(){N=!0}function h(){F=0,q.length=0,M=!1,r()}function g(){l()}function d(){u(),H=setTimeout(function(){H=0,h()},t.vmouse.resetTimerDuration)}function u(){H&&(clearTimeout(H),H=0)}function p(e,i,s){var a;return(s&&s[e]||!s&&o(i.target,e))&&(a=n(i,e),t(i.target).trigger(a)),a}function f(e){var i=t.data(e.target,k);if(!(M||F&&F===i)){var s=p("v"+e.type,e);s&&(s.isDefaultPrevented()&&e.preventDefault(),s.isPropagationStopped()&&e.stopPropagation(),s.isImmediatePropagationStopped()&&e.stopImmediatePropagation())}}function v(e){var i,s,n=a(e).touches;if(n&&1===n.length&&(i=e.target,s=c(i),s.hasVirtualBinding)){F=L++,t.data(i,k,F),u(),g(),E=!1;var o=a(e).touches[0];S=o.pageX,C=o.pageY,p("vmouseover",e,s),p("vmousedown",e,s)}}function m(t){N||(E||p("vmousecancel",t,c(t.target)),E=!0,d())}function b(e){if(!N){var i=a(e).touches[0],s=E,n=t.vmouse.moveDistanceThreshold,o=c(e.target);E=E||Math.abs(i.pageX-S)>n||Math.abs(i.pageY-C)>n,E&&!s&&p("vmousecancel",e,o),p("vmousemove",e,o),d()}}function w(t){if(!N){r();var e,i=c(t.target);if(p("vmouseup",t,i),!E){var s=p("vclick",t,i);s&&s.isDefaultPrevented()&&(e=a(t).changedTouches[0],q.push({touchID:F,x:e.clientX,y:e.clientY}),M=!0)}p("vmouseout",t,i),E=!1,d()}}function $(e){var i,s=t.data(e,D);if(s)for(i in s)if(s[i])return!0;return!1}function y(){}function x(e){var i=e.substr(1);return{setup:function(s,a){$(this)||t.data(this,D,{});var n=t.data(this,D);n[e]=!0,W[e]=(W[e]||0)+1,1===W[e]&&z.bind(i,f),t(this).bind(i,y),A&&(W.touchstart=(W.touchstart||0)+1,1===W.touchstart&&z.bind("touchstart",v).bind("touchend",w).bind("touchmove",b).bind("scroll",m))},teardown:function(s,a){--W[e],W[e]||z.unbind(i,f),A&&(--W.touchstart,W.touchstart||z.unbind("touchstart",v).unbind("touchmove",b).unbind("touchend",w).unbind("scroll",m));var n=t(this),c=t.data(this,D);c&&(c[e]=!1),n.unbind(i,y),$(this)||n.removeData(D)}}}var j,D="virtualMouseBindings",k="virtualTouchID",I="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),T="clientX clientY pageX pageY screenX screenY".split(" "),P=t.event.mouseHooks?t.event.mouseHooks.props:[],O=t.event.props.concat(P),W={},H=0,S=0,C=0,E=!1,q=[],M=!1,N=!1,A="addEventListener"in i,z=t(i),L=1,F=0;t.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var B=0;B<I.length;B++)t.event.special[I[B]]=x(I[B]);A&&i.addEventListener("click",function(e){var i,s,a,n,c,o,l=q.length,r=e.target;if(l)for(i=e.clientX,s=e.clientY,j=t.vmouse.clickDistanceThreshold,a=r;a;){for(n=0;l>n;n++)if(c=q[n],o=0,a===r&&Math.abs(c.x-i)<j&&Math.abs(c.y-s)<j||t.data(a,k)===c.touchID)return e.preventDefault(),void e.stopPropagation();a=a.parentNode}},!0)}(t,e,i),function(t){t.mobile={}}(t),function(t,e){var s={touch:"ontouchend"in i};t.mobile.support=t.mobile.support||{},t.extend(t.support,s),t.extend(t.mobile.support,s)}(t),function(t,e,s){function a(e,i,s){var a=s.type;s.type=i,t.event.dispatch.call(e,s),s.type=a}var n=t(i);t.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,i){t.fn[i]=function(t){return t?this.bind(i,t):this.trigger(i)},t.attrFn&&(t.attrFn[i]=!0)});var c=t.mobile.support.touch,o="touchmove scroll",l=c?"touchstart":"mousedown",r=c?"touchend":"mouseup",h=c?"touchmove":"mousemove";t.event.special.scrollstart={enabled:!0,setup:function(){function e(t,e){i=e,a(n,i?"scrollstart":"scrollstop",t)}var i,s,n=this,c=t(n);c.bind(o,function(a){t.event.special.scrollstart.enabled&&(i||e(a,!0),clearTimeout(s),s=setTimeout(function(){e(a,!1)},50))})}},t.event.special.tap={tapholdThreshold:750,setup:function(){var e=this,i=t(e);i.bind("vmousedown",function(s){function c(){clearTimeout(r)}function o(){c(),i.unbind("vclick",l).unbind("vmouseup",c),n.unbind("vmousecancel",o)}function l(t){o(),h===t.target&&a(e,"tap",t)}if(s.which&&1!==s.which)return!1;var r,h=s.target;s.originalEvent;i.bind("vmouseup",c).bind("vclick",l),n.bind("vmousecancel",o),r=setTimeout(function(){a(e,"taphold",t.Event("taphold",{target:h}))},t.event.special.tap.tapholdThreshold)})}},t.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,start:function(e){var i=e.originalEvent.touches?e.originalEvent.touches[0]:e;return{time:(new Date).getTime(),coords:[i.pageX,i.pageY],origin:t(e.target)}},stop:function(t){var e=t.originalEvent.touches?t.originalEvent.touches[0]:t;return{time:(new Date).getTime(),coords:[e.pageX,e.pageY]}},handleSwipe:function(e,i){i.time-e.time<t.event.special.swipe.durationThreshold&&Math.abs(e.coords[0]-i.coords[0])>t.event.special.swipe.horizontalDistanceThreshold&&Math.abs(e.coords[1]-i.coords[1])<t.event.special.swipe.verticalDistanceThreshold&&e.origin.trigger("swipe").trigger(e.coords[0]>i.coords[0]?"swipeleft":"swiperight")},setup:function(){var e=this,i=t(e);i.bind(l,function(e){function a(e){c&&(n=t.event.special.swipe.stop(e),Math.abs(c.coords[0]-n.coords[0])>t.event.special.swipe.scrollSupressionThreshold&&e.preventDefault())}var n,c=t.event.special.swipe.start(e);i.bind(h,a).one(r,function(){i.unbind(h,a),c&&n&&t.event.special.swipe.handleSwipe(c,n),c=n=s})})}},t.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(e,i){t.event.special[e]={setup:function(){t(this).bind(i,t.noop)}}})}(t,this)}),function(t){"use strict";t.fn.fitVids=function(e){var i={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var s=document.head||document.getElementsByTagName("head")[0],a=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}",n=document.createElement("div");n.innerHTML='<p>x</p><style id="fit-vids-style">'+a+"</style>",s.appendChild(n.childNodes[1])}return e&&t.extend(i,e),this.each(function(){var e=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];i.customSelector&&e.push(i.customSelector);var s=".fitvidsignore";i.ignore&&(s=s+", "+i.ignore);var a=t(this).find(e.join(","));a=a.not("object object"),a=a.not(s),a.each(function(){var e=t(this);if(!(e.parents(s).length>0||"embed"===this.tagName.toLowerCase()&&e.parent("object").length||e.parent(".fluid-width-video-wrapper").length)){e.css("height")||e.css("width")||!isNaN(e.attr("height"))&&!isNaN(e.attr("width"))||(e.attr("height",9),e.attr("width",16));var i="object"===this.tagName.toLowerCase()||e.attr("height")&&!isNaN(parseInt(e.attr("height"),10))?parseInt(e.attr("height"),10):e.height(),a=isNaN(parseInt(e.attr("width"),10))?e.width():parseInt(e.attr("width"),10),n=i/a;if(!e.attr("id")){var c="fitvid"+Math.floor(999999*Math.random());e.attr("id",c)}e.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*n+"%"),e.removeAttr("height").removeAttr("width")}})})}}(window.jQuery||window.Zepto),function(t){window.lightcase={cache:{},support:{},labels:{errorMessage:"Source could not be found...","sequenceInfo.of":" of ",close:"Close","navigator.prev":"Prev","navigator.next":"Next","navigator.play":"Play","navigator.pause":"Pause"},init:function(e){t(this).unbind("click").click(function(i){i.preventDefault(),t(this).lightcase("start",e)})},start:function(e){lightcase.settings=t.extend({idPrefix:"lightcase-",classPrefix:"lightcase-",transition:"elastic",transitionIn:null,transitionOut:null,cssTransitions:!0,speedIn:350,speedOut:250,maxWidth:1200,maxHeight:1e3,forceWidth:!1,forceHeight:!1,liveResize:!0,fullScreenModeForMobile:!0,mobileMatchExpression:/(iphone|ipod|ipad|android|blackberry|symbian)/,disableShrink:!1,shrinkFactor:.75,overlayOpacity:.9,slideshow:!1,timeout:5e3,swipe:!0,useKeys:!0,navigateEndless:!0,closeOnOverlayClick:!0,showTitle:!0,showCaption:!0,showSequenceInfo:!0,inline:{width:"auto",height:"auto"},ajax:{width:"auto",height:"auto",type:"get",dataType:"html",data:{}},iframe:{width:800,height:500,frameborder:0},flash:{width:400,height:205,wmode:"transparent"},video:{width:400,height:225,poster:"",preload:"auto",controls:!0,autobuffer:!0,autoplay:!0,loop:!1},type:null,typeMapping:{image:"jpg,jpeg,gif,png,bmp",flash:"swf",video:"mp4,mov,ogv,ogg,webm",iframe:"html,php",ajax:"txt",inline:"#"},errorMessage:function(){return'<p class="'+lightcase.settings.classPrefix+'error">'+lightcase.labels.errorMessage+"</p>"},markup:function(){t("body").append($overlay=t('<div id="'+lightcase.settings.idPrefix+'overlay"></div>'),$loading=t('<div id="'+lightcase.settings.idPrefix+'loading"></div>'),$case=t('<div id="'+lightcase.settings.idPrefix+'case" aria-hidden="true" role="dialog"></div>')),$case.append($content=t('<div class="'+lightcase.settings.classPrefix+'content"></div>'),$info=t('<div class="'+lightcase.settings.classPrefix+'info"></div>'),$close=t('<a href="#" class="'+lightcase.settings.classPrefix+'close">'+lightcase.labels.close+"</a>")),$info.append($sequenceInfo=t('<div class="'+lightcase.settings.classPrefix+'sequenceInfo"></div>'),$title=t('<h4 class="'+lightcase.settings.classPrefix+'title"></h4>'),$caption=t('<p class="'+lightcase.settings.classPrefix+'caption"></p>')),$content.append($contentInner=t('<div class="'+lightcase.settings.classPrefix+'contentInner"></div>'),$nav=t('<div class="'+lightcase.settings.classPrefix+'nav"></div>')),$nav.append($prev=t('<a href="#" class="'+lightcase.settings.classPrefix+'prev"><span>'+lightcase.labels["navigator.prev"]+"</span></a>").hide(),$next=t('<a href="#" class="'+lightcase.settings.classPrefix+'next"><span>'+lightcase.labels["navigator.next"]+"</span></a>").hide(),$play=t('<a href="#" class="'+lightcase.settings.classPrefix+'play"><span>'+lightcase.labels["navigator.play"]+"</span></a>").hide(),$pause=t('<a href="#" class="'+lightcase.settings.classPrefix+'pause"><span>'+lightcase.labels["navigator.pause"]+"</span></a>").hide())},onInit:function(){},onStart:function(){},onFinish:function(){}},e),lightcase.objectData=lightcase.getObjectData(this),lightcase.dimensions=lightcase.getDimensions(),lightcase.settings.onInit(),lightcase.addElements(),lightcase.lightcaseOpen()},getObjectData:function(e){var i={$link:e,title:e.attr("title"),caption:e.children("img").attr("alt"),url:lightcase.verifyDataUrl(e.attr("data-href")||e.attr("href")),requestType:lightcase.settings.ajax.type,requestData:lightcase.settings.ajax.data,responseDataType:lightcase.settings.ajax.dataType,rel:e.attr("data-rel"),type:lightcase.settings.type||lightcase.verifyDataType(e.attr("data-href")||e.attr("href")),isPartOfSequence:lightcase.isPartOfSequence(e.attr("data-rel"),":"),isPartOfSequenceWithSlideshow:lightcase.isPartOfSequence(e.attr("data-rel"),":slideshow"),currentIndex:t('[data-rel="'+e.attr("data-rel")+'"]').index(e),sequenceLength:t('[data-rel="'+e.attr("data-rel")+'"]').length};return i.sequenceInfo=i.currentIndex+1+lightcase.labels["sequenceInfo.of"]+i.sequenceLength,i},isPartOfSequence:function(e,i){var s=t('[data-rel="'+e+'"]'),a=new RegExp(i);return a.test(e)&&s.length>1?!0:!1},isSlideshowEnabled:function(){return!lightcase.objectData.isPartOfSequence||lightcase.settings.slideshow!==!0&&lightcase.objectData.isPartOfSequenceWithSlideshow!==!0?!1:!0},loadContent:function(){lightcase.cache.originalObject&&lightcase.restoreObject(),lightcase.createObject()},createObject:function(){switch(lightcase.objectData.type){case"image":var e=t(new Image);e.attr({src:lightcase.objectData.url+"?random="+(new Date).getTime(),alt:lightcase.objectData.title});break;case"inline":var e=t('<div class="'+lightcase.settings.classPrefix+'inlineWrap"></div>');e.html(lightcase.cloneObject(t(lightcase.objectData.url))),t.each(lightcase.settings.inline,function(t,i){e.attr("data-"+t,i)});break;case"ajax":var e=t('<div class="'+lightcase.settings.classPrefix+'inlineWrap"></div>');t.each(lightcase.settings.ajax,function(t,i){"data"!==t&&e.attr("data-"+t,i)});break;case"flash":var e=t('<embed src="'+lightcase.objectData.url+'" type="application/x-shockwave-flash"></embed>');t.each(lightcase.settings.flash,function(t,i){e.attr(t,i)});break;case"video":var e=t("<video></video>");e.attr("src",lightcase.objectData.url),t.each(lightcase.settings.video,function(t,i){e.attr(t,i)});break;default:var e=t("<iframe></iframe>");e.attr({src:lightcase.objectData.url}),t.each(lightcase.settings.iframe,function(t,i){e.attr(t,i)})}lightcase.addObject(e),lightcase.loadObject(e)},addObject:function(t){$contentInner.html(t),lightcase.loading("start"),lightcase.settings.onStart(),lightcase.settings.showSequenceInfo===!0&&lightcase.objectData.isPartOfSequence?($sequenceInfo.html(lightcase.objectData.sequenceInfo),$sequenceInfo.show()):($sequenceInfo.empty(),$sequenceInfo.hide()),lightcase.settings.showTitle===!0&&void 0!==lightcase.objectData.title&&""!==lightcase.objectData.title?($title.html(lightcase.objectData.title),$title.show()):($title.empty(),$title.hide()),lightcase.settings.showCaption===!0&&void 0!==lightcase.objectData.caption&&""!==lightcase.objectData.caption?($caption.html(lightcase.objectData.caption),$caption.show()):($caption.empty(),$caption.hide())},loadObject:function(e){switch(lightcase.objectData.type){case"inline":t(lightcase.objectData.url)?lightcase.showContent(e):lightcase.error();break;case"ajax":t.ajax(t.extend({},lightcase.settings.ajax,{url:lightcase.objectData.url,type:lightcase.objectData.requestType,dataType:lightcase.objectData.requestDataType,data:lightcase.objectData.requestData,success:function(i,s,a){"json"===lightcase.objectData.responseDataType&&(i=t.parseJSON(i)),e.html(i),lightcase.showContent(e)},error:function(t,e,i){lightcase.error()}}));break;case"flash":lightcase.showContent(e);break;case"video":"function"==typeof e.get(0).canPlayType||0===$case.find("video").length?lightcase.showContent(e):lightcase.error();break;default:lightcase.objectData.url?(e.load(function(){lightcase.showContent(e)}),e.error(function(){lightcase.error()})):lightcase.error()}},error:function(){lightcase.objectData.type="error";var e=t('<div class="'+lightcase.settings.classPrefix+'inlineWrap"></div>');e.html(lightcase.settings.errorMessage),$contentInner.html(e),lightcase.showContent($contentInner)},calculateDimensions:function(t){lightcase.cleanupDimensions();var e={objectWidth:t.attr(t.attr("width")?"width":"data-width"),objectHeight:t.attr(t.attr("height")?"height":"data-height"),maxWidth:parseInt(lightcase.dimensions.windowWidth*lightcase.settings.shrinkFactor),maxHeight:parseInt(lightcase.dimensions.windowHeight*lightcase.settings.shrinkFactor)};if(!lightcase.settings.disableShrink)switch(e.maxWidth>lightcase.settings.maxWidth&&(e.maxWidth=lightcase.settings.maxWidth),e.maxHeight>lightcase.settings.maxHeight&&(e.maxHeight=lightcase.settings.maxHeight),e.differenceWidthAsPercent=parseInt(100/e.maxWidth*e.objectWidth),e.differenceHeightAsPercent=parseInt(100/e.maxHeight*e.objectHeight),lightcase.objectData.type){case"image":case"flash":case"video":e.differenceWidthAsPercent>100&&e.differenceWidthAsPercent>e.differenceHeightAsPercent&&(e.objectWidth=e.maxWidth,e.objectHeight=parseInt(e.objectHeight/e.differenceWidthAsPercent*100)),e.differenceHeightAsPercent>100&&e.differenceHeightAsPercent>e.differenceWidthAsPercent&&(e.objectWidth=parseInt(e.objectWidth/e.differenceHeightAsPercent*100),e.objectHeight=e.maxHeight),e.differenceHeightAsPercent>100&&e.differenceWidthAsPercent<e.differenceHeightAsPercent&&(e.objectWidth=parseInt(e.maxWidth/e.differenceHeightAsPercent*e.differenceWidthAsPercent),e.objectHeight=e.maxHeight);break;case"error":!isNaN(e.objectWidth)&&e.objectWidth>e.maxWidth&&(e.objectWidth=e.maxWidth);break;default:(isNaN(e.objectWidth)||e.objectWidth>e.maxWidth)&&!lightcase.settings.forceWidth&&(e.objectWidth=e.maxWidth),(isNaN(e.objectHeight)&&"auto"!==e.objectHeight||e.objectHeight>e.maxHeight)&&!lightcase.settings.forceHeight&&(e.objectHeight=e.maxHeight)}lightcase.adjustDimensions(t,e)},adjustDimensions:function(t,e){t.css({width:e.objectWidth,height:e.objectHeight,"max-width":t.attr("data-max-width")?t.attr("data-max-width"):e.maxWidth,"max-height":t.attr("data-max-height")?t.attr("data-max-height"):e.maxHeight}),$contentInner.css({width:t.outerWidth(),height:t.outerHeight(),"max-width":"100%"}),$case.css({width:$contentInner.outerWidth()}),$case.css({"margin-top":parseInt(-($case.outerHeight()/2)),"margin-left":parseInt(-($case.outerWidth()/2))})},loading:function(t){"start"===t?($case.addClass(lightcase.settings.classPrefix+"loading"),$loading.show()):"end"===t&&($case.removeClass(lightcase.settings.classPrefix+"loading"),$loading.hide())},getDimensions:function(){return{windowWidth:t(window).innerWidth(),windowHeight:t(window).innerHeight()}},verifyDataUrl:function(t){return t&&void 0!==t&&""!==t?(t.indexOf("#")>-1&&(t=t.split("#"),t="#"+t[t.length-1]),t):!1},verifyDataType:function(t){var t=lightcase.verifyDataUrl(t),e=lightcase.settings.typeMapping;if(t)for(var i in e)for(var s=e[i].split(","),a=0;a<s.length;a++){var n=s[a],c=new RegExp(".("+n+")$","i"),o=t.split("?")[0].substr(-4);if(c.test(o)===!0)return i;if("inline"===i&&(t.indexOf(n)>-1||!t))return i}return"iframe"},addElements:function(){t('[id^="'+lightcase.settings.idPrefix+'"]').length||lightcase.settings.markup()},showContent:function(t){switch($case.attr("class","type-"+lightcase.objectData.type),lightcase.cache.object=t,lightcase.calculateDimensions(t),lightcase.settings.onFinish(),lightcase.settings.transitionIn){case"scrollTop":case"scrollRight":case"scrollBottom":case"scrollLeft":case"scrollHorizontal":case"scrollVertical":lightcase.transition.scroll($case,"in",lightcase.settings.speedIn),lightcase.transition.fade($contentInner,"in",lightcase.settings.speedIn);break;case"elastic":$case.css("opacity")<1&&(lightcase.transition.zoom($case,"in",lightcase.settings.speedIn),lightcase.transition.fade($contentInner,"in",lightcase.settings.speedIn));case"fade":case"fadeInline":lightcase.transition.fade($case,"in",lightcase.settings.speedIn),lightcase.transition.fade($contentInner,"in",lightcase.settings.speedIn);break;default:lightcase.transition.fade($case,"in",0)}lightcase.loading("end"),lightcase.busy=!1},processContent:function(){switch(lightcase.busy=!0,lightcase.settings.transitionOut){case"scrollTop":case"scrollRight":case"scrollBottom":case"scrollLeft":case"scrollVertical":case"scrollHorizontal":$case.is(":hidden")?(lightcase.transition.fade($case,"out",0,0,function(){lightcase.loadContent()}),lightcase.transition.fade($contentInner,"out",0)):(lightcase.transition.scroll($case,"out",lightcase.settings.speedOut,function(){lightcase.loadContent()}),lightcase.transition.fade($contentInner,"out",0));break;case"fade":$case.is(":hidden")?lightcase.transition.fade($case,"out",0,0,function(){lightcase.loadContent()}):lightcase.transition.fade($case,"out",lightcase.settings.speedOut,0,function(){lightcase.loadContent()});break;case"fadeInline":case"elastic":$case.is(":hidden")?lightcase.transition.fade($case,"out",0,0,function(){lightcase.loadContent()}):lightcase.transition.fade($contentInner,"out",lightcase.settings.speedOut,0,function(){lightcase.loadContent()});break;default:lightcase.transition.fade($case,"out",0,0,function(){lightcase.loadContent()})}},handleEvents:function(){lightcase.unbindEvents(),$nav.children().hide(),lightcase.isSlideshowEnabled()&&($play.show(),$pause.show(),$nav.hasClass(lightcase.settings.classPrefix+"paused")||lightcase.startTimeout()),lightcase.settings.liveResize&&t(window).resize(function(){lightcase.isSlideshowEnabled()&&lightcase.stopTimeout(),lightcase.open&&(lightcase.dimensions=lightcase.getDimensions(),lightcase.calculateDimensions(lightcase.cache.object))}),$close.click(function(t){t.preventDefault(),lightcase.lightcaseClose()}),lightcase.settings.closeOnOverlayClick===!0&&$overlay.css("cursor","pointer").click(function(t){t.preventDefault(),lightcase.lightcaseClose()}),lightcase.settings.useKeys===!0&&lightcase.addKeyEvents(),lightcase.objectData.isPartOfSequence&&(lightcase.nav=lightcase.setNavigation(),$prev.click(function(t){t.preventDefault(),$prev.unbind("click"),lightcase.cache.action="prev",lightcase.nav.$prevItem.click(),lightcase.isSlideshowEnabled()&&lightcase.stopTimeout()}),$next.click(function(t){t.preventDefault(),$next.unbind("click"),lightcase.cache.action="next",lightcase.nav.$nextItem.click(),lightcase.isSlideshowEnabled()&&lightcase.stopTimeout()}),lightcase.isSlideshowEnabled()&&($play.click(function(t){t.preventDefault(),lightcase.startTimeout()}),$pause.click(function(t){t.preventDefault(),lightcase.stopTimeout()})),lightcase.settings.swipe===!0&&(t.isPlainObject(t.event.special.swipeleft)&&$case.on("swipeleft",function(t){t.preventDefault(),$next.click(),lightcase.isSlideshowEnabled()&&lightcase.stopTimeout()}),t.isPlainObject(t.event.special.swiperight)&&$case.on("swiperight",function(t){t.preventDefault(),$prev.click(),lightcase.isSlideshowEnabled()&&lightcase.stopTimeout()})))},addKeyEvents:function(){t(document).keyup(function(t){if(!lightcase.busy)switch(t.keyCode){case 27:$close.click();break;case 37:lightcase.objectData.isPartOfSequence&&$prev.click();break;case 39:lightcase.objectData.isPartOfSequence&&$next.click()}})},startTimeout:function(){$play.hide(),$pause.show(),lightcase.cache.action="next",$nav.removeClass(lightcase.settings.classPrefix+"paused"),lightcase.timeout=setTimeout(function(){lightcase.nav.$nextItem.click()},lightcase.settings.timeout)},stopTimeout:function(){$play.show(),$pause.hide(),$nav.addClass(lightcase.settings.classPrefix+"paused"),clearTimeout(lightcase.timeout)},setNavigation:function(){var e=t('[data-rel="'+lightcase.objectData.rel+'"]'),i=lightcase.objectData.currentIndex,s=i-1,a=i+1,n=lightcase.objectData.sequenceLength-1,c={$prevItem:e.eq(s),$nextItem:e.eq(a)};return i>0?$prev.show():c.$prevItem=e.eq(n),n>=a?$next.show():c.$nextItem=e.eq(0),lightcase.settings.navigateEndless===!0&&($prev.show(),$next.show()),c},cloneObject:function(t){var e=t.clone(),i=t.attr("id");return t.is(":hidden")?(lightcase.cacheObjectData(t),t.attr("id",lightcase.settings.idPrefix+"temp-"+i).empty()):e.removeAttr("id"),e.show()},isMobileDevice:function(){var t=navigator.userAgent.toLowerCase(),e=t.match(lightcase.settings.mobileMatchExpression);return e?!0:!1},isTransitionSupported:function(){var e=t("body").get(0),i=!1,s={transition:"",WebkitTransition:"-webkit-",MozTransition:"-moz-",OTransition:"-o-",MsTransition:"-ms-"};for(var a in s)a in e.style&&(lightcase.support.transition=s[a],i=!0);return i},transition:{fade:function(t,e,i,s,a){var n="in"===e,c={},o=t.css("opacity"),l={},r=s?s:n?1:0;(lightcase.open||!n)&&(c.opacity=o,l.opacity=r,t.css(c).show(),lightcase.support.transitions?(l[lightcase.support.transition+"transition"]="opacity "+i+"ms ease-out",setTimeout(function(){t.css(l)},15),setTimeout(function(){t.css(lightcase.support.transition+"transition",""),!a||!lightcase.open&&n||a()},i)):(t.stop(),t.animate(l,i,a)))},scroll:function(t,e,i,s){var a="in"===e,n=a?lightcase.settings.transitionIn:lightcase.settings.transitionOut,c="left",o={},l=a?0:1,r=a?"-50%":"50%",h={},g=a?1:0,d=a?"50%":"-50%";if(lightcase.open||!a){switch(n){case"scrollTop":c="top";break;case"scrollRight":r=a?"150%":"50%",d=a?"50%":"150%";break;case"scrollBottom":c="top",r=a?"150%":"50%",d=a?"50%":"150%";break;case"scrollHorizontal":r=a?"150%":"50%",d=a?"50%":"-50%";break;case"scrollVertical":c="top",r=a?"-50%":"50%",d=a?"50%":"150%"}if("prev"===lightcase.cache.action)switch(n){case"scrollHorizontal":r=a?"-50%":"50%",d=a?"50%":"150%";break;case"scrollVertical":r=a?"150%":"50%",d=a?"50%":"-50%"}o.opacity=l,o[c]=r,h.opacity=g,h[c]=d,t.css(o).show(),lightcase.support.transitions?(h[lightcase.support.transition+"transition"]=c+" "+i+"ms ease-out",setTimeout(function(){t.css(h)},0),setTimeout(function(){t.css(lightcase.support.transition+"transition",""),!s||!lightcase.open&&a||s()},i)):(t.stop(),t.animate(h,i,s))}},zoom:function(t,e,i,s){var a="in"===e,n={},c=t.css("opacity"),o=a?"scale(0.75)":"scale(1)",l={},r=a?1:0,h=a?"scale(1)":"scale(0.75)";(lightcase.open||!a)&&(n.opacity=c,n[lightcase.support.transition+"transform"]=o,l.opacity=r,t.css(n).show(),lightcase.support.transitions?(l[lightcase.support.transition+"transform"]=h,l[lightcase.support.transition+"transition"]=i+"ms ease-out",setTimeout(function(){t.css(l)},0),setTimeout(function(){t.css(lightcase.support.transition+"transform",""),t.css(lightcase.support.transition+"transition",""),!s||!lightcase.open&&a||s()},i)):(t.stop(),t.animate(l,i,s)))}},cacheObjectData:function(e){t.data(e,"cache",{id:e.attr("id"),content:e.html()}),lightcase.cache.originalObject=e},restoreObject:function(){var e=t('[id^="'+lightcase.settings.idPrefix+'temp-"]');e.attr("id",t.data(lightcase.cache.originalObject,"cache").id),e.html(t.data(lightcase.cache.originalObject,"cache").content)},lightcaseOpen:function(){switch(lightcase.open=!0,lightcase.support.transitions=lightcase.settings.cssTransitions?lightcase.isTransitionSupported():!1,lightcase.support.mobileDevice=lightcase.isMobileDevice(),lightcase.support.mobileDevice&&(t("html").addClass(lightcase.settings.classPrefix+"isMobileDevice"),lightcase.settings.fullScreenModeForMobile&&lightcase.switchToFullScreenMode()),lightcase.settings.transitionIn||(lightcase.settings.transitionIn=lightcase.settings.transition),lightcase.settings.transitionOut||(lightcase.settings.transitionOut=lightcase.settings.transition),lightcase.settings.transitionIn){case"fade":case"fadeInline":case"elastic":case"scrollTop":case"scrollRight":case"scrollBottom":case"scrollLeft":case"scrollVertical":case"scrollHorizontal":$case.is(":hidden")&&($overlay.css("opacity",0),$case.css("opacity",0),$contentInner.css("opacity",0)),lightcase.transition.fade($overlay,"in",lightcase.settings.speedIn,lightcase.settings.overlayOpacity,function(){lightcase.handleEvents(),lightcase.processContent()});break;default:lightcase.transition.fade($overlay,"in",0,lightcase.settings.overlayOpacity,function(){lightcase.handleEvents(),lightcase.processContent()})}t("html").addClass(lightcase.settings.classPrefix+"open"),$case.attr("aria-hidden","false")},lightcaseClose:function(){switch(lightcase.open=!1,$loading.hide(),lightcase.unbindEvents(),lightcase.isSlideshowEnabled()&&lightcase.stopTimeout(),t("html").removeClass(lightcase.settings.classPrefix+"open"),$case.attr("aria-hidden","true"),lightcase.settings.transitionOut){case"fade":case"fadeInline":case"scrollTop":case"scrollRight":case"scrollBottom":case"scrollLeft":case"scrollVertical":case"scrollHorizontal":lightcase.transition.fade($case,"out",lightcase.settings.speedOut,0,function(){lightcase.transition.fade($overlay,"out",lightcase.settings.speedOut,0,function(){lightcase.cleanup()})});break;case"elastic":lightcase.transition.zoom($case,"out",lightcase.settings.speedOut,function(){lightcase.transition.fade($overlay,"out",lightcase.settings.speedOut,0,function(){lightcase.cleanup()})});break;default:lightcase.cleanup()}},switchToFullScreenMode:function(){lightcase.settings.shrinkFactor=1,lightcase.settings.overlayOpacity=1,"none"!==lightcase.settings.transitionIn&&(lightcase.settings.transitionIn="fade"),"none"!==lightcase.settings.transitionOut&&(lightcase.settings.transitionOut="fade"),t("html").addClass(lightcase.settings.classPrefix+"fullScreenMode")},unbindEvents:function(){$overlay.unbind("click"),t(document).unbind("keyup"),$case.unbind("swipeleft").unbind("swiperight"),$nav.children("a").unbind("click"),$close.unbind("click")},cleanupDimensions:function(){var t=$contentInner.css("opacity");$case.css({width:"",height:"",top:"",left:"","margin-top":"","margin-left":""}),$contentInner.removeAttr("style").css("opacity",t),$contentInner.children().removeAttr("style")},cleanup:function(){lightcase.cleanupDimensions(),lightcase.isSlideshowEnabled()&&(lightcase.stopTimeout(),$nav.removeClass(lightcase.settings.classPrefix+"paused")),$loading.hide(),$overlay.hide(),$case.hide().removeAttr("class"),$contentInner.empty().hide(),$info.children().empty(),lightcase.cache.originalObject&&lightcase.restoreObject(),lightcase.cache={}}},t.fn.lightcase=function(e){return lightcase[e]?lightcase[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.lightcase"):lightcase.init.apply(this,arguments)}}(jQuery);